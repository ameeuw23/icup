{% extends "ICupPublicSiteBundle:Masters:edit.html.twig" %}

{% trans_default_domain "admin" %}

{% block adminbody %}
    <h2 style="margin-bottom: 0">
        <i class="fa fa-university"></i>&nbsp;
        {% trans %}FORM.MATCHPLANNING.TITLE{% endtrans %}
    </h2>
    <p>{% trans %}FORM.MATCHPLANNING.CAPTION{% endtrans %}</p>
    <p class="lead">
        <a href="{{ path('_edit_tournamentboard', { 'tournamentid': tournament.id }) }}">
            {{ host.name|upper }}
            <br />
            {{ tournament.name }}
        </a>
    </p>
    <ul class="nav nav-tabs" role="tablist">
        <li>
            <a href="{{ path('_edit_match_planning_options', { 'tournamentid': tournament.id }) }}">
                <span class="fa fa-toggle-on"></span>&nbsp;{% trans %}FORM.MATCHPLANNING.OPTIONS{% endtrans %}
            </a>
        </li>
        <li class="active">
            <a href="{{ path('_edit_match_planning_groups', { 'tournamentid': tournament.id }) }}">
                <span class="fa fa-cubes"></span>&nbsp;{% trans %}FORM.MATCHPLANNING.GROUPS{% endtrans %}
            </a>
        </li>
        <li>
            <a href="{{ path('_edit_match_planning_result', { 'tournamentid': tournament.id }) }}">
                <span class="fa fa-puzzle-piece"></span>&nbsp;{% trans %}FORM.MATCHPLANNING.RESULT{% endtrans %}
            </a>
        </li>
        <li>
            <a href="{{ path('_edit_match_planning_view', { 'tournamentid': tournament.id }) }}">
                <span class="fa fa-calendar-check-o"></span>&nbsp;{% trans %}FORM.MATCHPLANNING.VIEW{% endtrans %}
            </a>
        </li>
        <li>
            <a href="{{ path('_edit_match_planning_advice', { 'tournamentid': tournament.id }) }}">
                <span class="fa fa-lightbulb-o"></span>&nbsp;{% trans %}FORM.MATCHPLANNING.ADVICE{% endtrans %}
            </a>
        </li>
        <li>
            <a href="{{ path('_edit_match_maint', { 'tournamentid': tournament.id }) }}">
                <span class="fa fa-wrench"></span>&nbsp;{% trans %}FORM.MATCHPLANNING.MAINT{% endtrans %}
            </a>
        </li>
    </ul>
    <div class="row">
{%  for catrec in catlist %}
        <div class="col-sm-2">
        <h4 style="margin-bottom: 0px">
            {% trans from "tournament" %}CATEGORY{% endtrans %} {{ catrec.category.name|upper }}
        </h4>
        <p>
        {{ ['GENDER.',
        catrec.category.gender,
        catrec.category.classification]|join|transchoice(catrec.category.age, { '%age%': catrec.category.age },'tournament') }}
        </p>
        <p>
            <a class="btn btn-default" href="{{ path('_host_list_groups', { 'categoryid': catrec.category.id }) }}">
                {% trans %}FORM.LISTGROUPS.TITLE{% endtrans %}
            </a>
        </p>
    {% for grprec in catrec.group %}
        <p>
            <a href="{{ path('_edit_group_list_matches', { 'groupid': grprec.obj.id }) }}" title="{% trans %}FORM.LISTMATCHES.TITLE{% endtrans %}">
                <span class="label label-primary">{% trans from "tournament" %}GROUP{% endtrans %} {{ grprec.obj.name }}</span>
            </a><br />
        {% if grprec.cnt > 0 %}
            <small>
                {% trans %}FORM.MATCHPLANNING.TEAMS{% endtrans %}: {{ grprec.cnt }}<br />
                {% trans %}FORM.MATCHPLANNING.MATCHES{% endtrans %}: {{ grprec.cnt/2 * (grprec.cnt-1) }}
            </small>
        {% else %}
            <small>{% trans %}FORM.MATCHPLANNING.NOTEAMS{% endtrans %}</small>
        {% endif %}
        </p>
    {%  endfor %}
        </div>
{%  endfor %}
    </div>
{% endblock %}
