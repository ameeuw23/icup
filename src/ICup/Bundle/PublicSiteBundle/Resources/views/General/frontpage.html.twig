{% extends "ICupPublicSiteBundle:Masters:standard.html.twig" %}

{% form_theme form 'ICupPublicSiteBundle:Default:layout.script.html.twig' %}
{% trans_default_domain "club" %}

{% import 'ICupPublicSiteBundle:Masters:club.html.twig' as formatter %}

{% block widebody %}
<div class="jumbotron"
     style="
    background-image: url('{{ imagepath }}/IWC/bg.jpg');
    background-size: cover;
    background-repeat: no-repeat;">
    <div class="container">
        <img src="{{ imagepath }}/IWC/logo.png" alt="logo" class="img-responsive" />
{% for tournament in statuslist.active %}
        <p class="lead"><strong>{{ tournament.edition }} - {{ tournament.name }}</strong></p>
{% endfor %}
    </div>
</div>
<div class="container">
{% for flashMessage in app.session.flashbag.get('msgsent') %}
    <div class="alert alert-success alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert">
            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
        </button>
        {{ flashMessage|trans }}
    </div>
{% endfor %}
{% for tournament in statuslist.active %}
    <h2><i class="fa fa-flag">&nbsp;</i>{% trans %}FORM.FRONTPAGE.BLOCK3.TITLE{% endtrans %}</h2>
    <hr />
    <div class="row">
        <div class="col-md-8">
    {% for matchset in matchlist %}
            <p class="lead">
                {{ 'FORMAT.LONGDATE'|transchoice(matchset[0].schedule|date('j'), {
                        '%week%': ['WEEK.',matchset[0].schedule|date('D')|upper]|join|trans([],'messages')|capitalize,
                        '%day%': matchset[0].schedule|date('j'),
                        '%month%': ['MONTH.',matchset[0].schedule|date('M')|upper]|join|trans([],'messages'),
                        '%year%': matchset[0].schedule|date('Y')}, 'messages') }}
            </p>
            <div class="visible-sm visible-md visible-lg">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <td class="narrow-col">{% trans from "tournament" %}LEGEND.NO{% endtrans %}</td>
                            <td class="narrow-col">{% trans from "tournament" %}LEGEND.TIME{% endtrans %}<br />
                                                   {% trans from "tournament" %}LEGEND.PLAYGROUND{% endtrans %}</td>
                            <td class="flag"></td>
                            <td>{% trans from "tournament" %}LEGEND.HOMETEAM{% endtrans %}</td>
                            <td class="flag"></td>
                            <td>{% trans from "tournament" %}LEGEND.AWAYTEAM{% endtrans %}</td>
                            <td class="narrow-col">{% trans from "tournament" %}LEGEND.RESULT{% endtrans %}</td>
                        </tr>
                    </thead>
                    <tbody>
        {% for match in matchset %}
                        <tr>
                            <td class="narrow-col">{{ match.matchno }}</td>
                            <td class="narrow-col">{{ match.schedule|date('FORMAT.TIME'|trans([],'messages')) }}<br />
                                <a href="{{ path('_showplayground_full', { 'playgroundid': match.playground.id }) }}" title="{{ match.playground.name }}">{{ match.playground.no }}</a></td>
                            {{ formatter.club(match.home, match.group.id, _context) }}
                            {{ formatter.club(match.away, match.group.id, _context) }}
                            <td class="narrow-col text-nowrap">{{ match.home.score }}-{{ match.away.score }}</td>
                        </tr>
        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="visible-xs">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <td class="narrow-col">{% trans from "tournament" %}LEGEND.NO{% endtrans %}</td>
                            <td class="narrow-col">{% trans from "tournament" %}LEGEND.TIME{% endtrans %}<br />
                                                   {% trans from "tournament" %}LEGEND.PLAYGROUND{% endtrans %}</td>
                            <td>{% trans from "tournament" %}LEGEND.HOMETEAM{% endtrans %}<br />
                                {% trans from "tournament" %}LEGEND.AWAYTEAM{% endtrans %}</td>
                            <td class="narrow-col">{% trans from "tournament" %}LEGEND.RESULT{% endtrans %}</td>
                        </tr>
                    </thead>
                    <tbody>
        {% for match in matchset %}
                        <tr>
                            <td class="narrow-col">{{ match.matchno }}</td>
                            <td class="narrow-col">{{ match.schedule|date('FORMAT.TIME'|trans([],'messages')) }}<br />
                                <a href="{{ path('_showplayground_full', { 'playgroundid': match.playground.id }) }}" title="{{ match.playground.name }}">{{ match.playground.no }}</a></td>
                            <td>
                                {{ formatter.clubxs(match.home, match.away, match.group.id, _context) }}
                            </td>
                            <td class="narrow-col text-nowrap">{{ match.home.score }}-{{ match.away.score }}</td>
                        </tr>
        {% endfor %}
                    </tbody>
                </table>
            </div>
            <a href="{{ path('_show_matches', {'tournament': tournament.key}) }}" role="button">
                <h3><span class="label label-default">{% trans %}FORM.FRONTPAGE.BLOCK3.LEARNMORE{% endtrans %}</span></h3>
            </a>
            <br />
            <div class="list-group">
        {% for teaser in teaserlist %}
                <a class="list-group-item" href="{{ teaser.path }}">
                    <h4 class="list-group-item-heading">{{ teaser.titletext|trans([], 'tournament') }}</h4>
                    <p class="list-group-item-text">{{ teaser.text|trans([], 'tournament') }}</p>
                </a>
        {% endfor %}
            </div>
    {% endfor %}
        </div>
        <div class="col-md-4 hidden-sm hidden-xs">
            <img src="{{ imagepath }}/IWC/Teramo.png" alt="logo" class="img-responsive img-rounded" />
            <h2>{% trans %}FORM.FRONTPAGE.BLOCK1.TITLE{% endtrans %}</h2>
            <p class="lead">{% trans %}FORM.FRONTPAGE.BLOCK1.DESCRIPTION{% endtrans %}</p>
            <p>
                <a class="btn btn-success btn-lg" href="{{ path('_ausr_new_user') }}" role="button">{% trans %}FORM.FRONTPAGE.BLOCK1.LEARNMORE{% endtrans %}&nbsp;<i class="fa fa-angle-double-right"></i></a>
            </p>
        </div>
    </div>
    <div class="visible-sm visible-xs">
        <hr />
        <h2>{% trans %}FORM.FRONTPAGE.BLOCK1.TITLE{% endtrans %}</h2>
        <p class="lead">{% trans %}FORM.FRONTPAGE.BLOCK1.DESCRIPTION{% endtrans %}</p>
        <p>
            <a class="btn btn-success btn-lg" href="{{ path('_ausr_new_user') }}" role="button">{% trans %}FORM.FRONTPAGE.BLOCK1.LEARNMORE{% endtrans %}&nbsp;<i class="fa fa-angle-double-right"></i></a>
        </p>
    </div>
{% else %}
    {{ sonata_block_render({'name': '/cms/content/blocks/frontpage/section_1'}) }}
{% endfor %}
    <hr />        
{% set spaceleft = 8 - ((statuslist.enroll|length * 4) + (statuslist.done|length * 4)) %}
    <div class="row">
{% if spaceleft > 0 %}
        <div class="col-md-{{ spaceleft / 2 }}"></div>
{% endif %}
{% for tournament in statuslist.done %}
        <div class="col-md-4">
            <center>
                <i class="fa fa-trophy fa-5x"></i>
                <h2>{% trans %}FORM.FRONTPAGE.BLOCK4.TITLE{% endtrans %}</h2>
                <p>{% trans %}FORM.FRONTPAGE.BLOCK4.DESCRIPTION{% endtrans %}</p>
                <p>
                    <a href="{{ path('_tournament_winners', {'tournament': tournament.key}) }}" role="button">
                        <h3><span class="label label-primary"><i class="fa fa-trophy"></i>&nbsp;{{ tournament.name }}</span></h3>
                    </a>
                </p>
            </center>
            <br />
            <hr class="visible-sm visible-xs" />
        </div>
{% endfor %}
        <div class="col-md-4">
            <center>
                <i class="fa fa-info-circle fa-5x"></i>
                <h2>{% trans %}FORM.FRONTPAGE.BLOCK5.TITLE{% endtrans %}</h2>
                <p>{% trans %}FORM.FRONTPAGE.BLOCK5.DESCRIPTION{% endtrans %}</p>
                <p>
                    <a href="{{ path('_information') }}" role="button">
                        <h3><span class="label label-default"><i class="fa fa-info-circle"></i>&nbsp;Information</span></h3>
                    </a>
                </p>
            </center>
            <br />
            <hr class="visible-sm visible-xs" />
        </div>
{% for tournament in statuslist.enroll %}
        <div class="col-md-4">
            <center>
                <i class="fa fa-ticket fa-5x"></i>
                <h2>{% trans %}FORM.FRONTPAGE.BLOCK2.TITLE{% endtrans %}</h2>
                <p>{% trans %}FORM.FRONTPAGE.BLOCK2.DESCRIPTION{% endtrans %}</p>
                <p>
                    <a href="{{ path('_enrollment') }}" role="button">
                        <h3><span class="label label-default"><i class="fa fa-ticket"></i>&nbsp;{{ tournament.name }}</span></h3>
                    </a>
                </p>
            </center>
            <br />
            <hr class="visible-sm visible-xs" />
        </div>
{% endfor %}
{% if spaceleft > 0 %}
        <div class="col-md-{{ spaceleft / 2 }}"></div>
{% endif %}
   </div>
</div>
<p>&nbsp;</p>
<div class="jumbotron">
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <h2>FÃ¥ mere information - udfyld og send</h2>
                <p>
                    {{ form(form) }}
                </p>
            </div>
            <div class="col-md-2"></div>
        </div>
</div>
{% endblock %}
