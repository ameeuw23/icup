{% extends "ICupPublicSiteBundle:Masters:edit.html.twig" %}
{% trans_default_domain "admin" %}

{% block adminbody %}
<h1>{% trans %}FORM.ADMIN{% endtrans %}</h1>
<p class="subtitle">{% trans %}FORM.LISTCATEGORIES.TITLE{% endtrans %}</p>
<a href="{{ path('_edit_host_list') }}">
<h2 class="category">{{ host.name|upper }}</h2>
</a>
<p>
<table>
    <caption>{{ tournament.name }}</caption>
    <thead>
        <tr>
            <td colspan="2">{% trans %}FORM.LISTCATEGORIES.CAPTION{% endtrans %}</td>
            <td class="operand"></td>
            <td class="operand"></td>
            <td class="operand"></td>
            <td class="operand"></td>
            <td class="operand"></td>
        </tr>
    </thead>
    <tboby>
{% if categories|length > 0 %}
    {% for category in categories %}
        {% set loopindex = loop.index %}
        <tr class="{{ cycle(['even','odd'],loopindex) }}">
            <td class="host_solo" colspan="2">
                <a href="{{ path('_edit_category_chg', { 'categoryid': category.id }) }}">
                {% trans from "tournament" %}CATEGORY{% endtrans %} {{ category.name|upper }}
                </a>    
            </td>
            <td class="operand">
                <a href="{{ path('_edit_category_add', { 'tournamentid': tournament.id }) }}">
                +
                </a>    
            </td>
            <td class="operand">
                <a href="{{ path('_edit_category_chg', { 'categoryid': category.id }) }}">
                E
                </a>    
            </td>
            <td class="operand">
                <a href="{{ path('_edit_category_del', { 'categoryid': category.id }) }}">
                -
                </a>    
            </td>
            <td class="operand">
                <a href="{{ path('_host_list_groups', { 'categoryid': category.id }) }}">
                A
                </a>    
            </td>
            <td class="operand">
                <a href="{{ path('_edit_import_match', { 'tournamentid': tournament.id }) }}">
                M
                </a>    
            </td>
        </tr>
        {% if category.id in groups|keys %}
            {% for group in groups[category.id] %}
        <tr class="{{ cycle(['even','odd'],loopindex+loop.index) }}">
            <td class="indent"></td>
            <td><a href="{{ path('_edit_group_chg', { 'groupid': group.id }) }}">{% trans from "tournament" %}GROUP{% endtrans %} {{ group.name }}</a></td>
            <td class="operand">
                <a href="{{ path('_edit_group_add', { 'categoryid': category.id }) }}">
                +
                </a>    
            </td>
            <td class="operand">
                <a href="{{ path('_edit_group_chg', { 'groupid': group.id }) }}">
                E
                </a>    
            </td>
            <td class="operand">
                <a href="{{ path('_edit_group_del', { 'groupid': group.id }) }}">
                -
                </a>    
            </td>
            <td class="operand"></td>
            <td class="operand">
                <a href="{{ path('_edit_group_list_matches', { 'groupid': group.id }) }}">
                M
                </a>    
            </td>
        </tr>
            {% endfor %}
        {% else %}
        <tr class="{{ cycle(['even','odd'],loopindex) }}">
            <td></td>
            <td><a href="{{ path('_edit_group_add', { 'categoryid': category.id }) }}">{{'FORM.LISTCATEGORIES.NOGROUP'|trans|upper}}</a></td>
            <td class="operand">
                <a href="{{ path('_edit_group_add', { 'categoryid': category.id }) }}">
                +
                </a>    
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        {% endif %}
    {% endfor %}
{% else %}
        <tr class="odd">
            <td class="host_solo" colspan="2">
                <a href="{{ path('_edit_category_add', { 'tournamentid': tournament.id }) }}">
                {{'FORM.LISTCATEGORIES.NOCATEGORY'|trans|upper}}
                </a>    
            </td>
            <td class="operand">
                <a href="{{ path('_edit_category_add', { 'tournamentid': tournament.id }) }}">
                +
                </a>    
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
{% endif %}
    </tboby>
    <tfoot>
        <tr>
            <td colspan="7"></td>
        </tr>
    </tfoot>
</table>
</p>
{% endblock %}