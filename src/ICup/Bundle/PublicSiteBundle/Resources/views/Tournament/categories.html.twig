{% extends "ICupPublicSiteBundle:Masters:standard.html.twig" %}
{% trans_default_domain "tournament" %}

{% block body %}
<h1 class="category">{{ tournament.name }}</h1>
<p class="subcategory">
    {% trans %}RESULTS{% endtrans %} {{ tournament.edition }}<br />
</p>
<div>
{% if classifications|length > 0 %}
    <table>
        <caption>{% trans %}CATEGORIES{% endtrans %}</caption>
        <thead>
            <tr>
                <td>{% trans %}CLASS{% endtrans %}</td>
                <td>{% trans %}FEMALE{% endtrans %}</td>
                <td>{% trans %}MALE{% endtrans %}</td>
            </tr>
        </thead>
        <tboby>
{% for categorykey in classifications %}
    {% set colorclass = cycle(['even','odd'],loop.index) %}
    {% set femalekey = ['F',categorykey]|join %}
    {% set malekey = ['M',categorykey]|join %}
    {% set femalecategorylist = femalekey in categories|keys ? categories[femalekey] : {} %}
    {% set malecategorylist = malekey in categories|keys ? categories[malekey] : {} %}
    {% set size = femalecategorylist|length > malecategorylist|length ? femalecategorylist|length : malecategorylist|length %}
    {% for i in 0..size-1 %}
            <tr class="{{ colorclass }}">
        {% if i == 0 %}
                <td class="classification" rowspan="{{ size }}">{{ categorykey }}</td>
        {% endif %}
        {% if femalecategorylist[i] is defined %}
                <td class="categories">
                    <a href="{{ path('_showcategory', { 'categoryid': femalecategorylist[i].id }) }}">
                        <b>{% trans %}CATEGORY{% endtrans %} {{ femalecategorylist[i].name }}</b>
                    </a><br />
                        {{ ['GENDER.',
                            femalecategorylist[i].gender,
                            femalecategorylist[i].classification]|join|transchoice(femalecategorylist[i].age, { '%age%': femalecategorylist[i].age },'tournament') }}
                </td>
        {% else %}
                <td class="categories"></td>
        {% endif %}
        {% if malecategorylist[i] is defined %}
                <td class="categories">
                    <a href="{{ path('_showcategory', { 'categoryid': malecategorylist[i].id }) }}">
                        <b>{% trans %}CATEGORY{% endtrans %} {{ malecategorylist[i].name }}</b>
                    </a><br />
                        {{ ['GENDER.',
                            malecategorylist[i].gender,
                            malecategorylist[i].classification]|join|transchoice(malecategorylist[i].age, { '%age%': malecategorylist[i].age },'tournament') }}
                </td>
            </tr>
        {% else %}
                <td class="categories"></td>
        {% endif %}
    {% endfor %}
{% endfor %}
        </tboby>
        <tfoot>
            <tr>
                <td colspan="3"></td>
            </tr>
        </tfoot>
    </table>
{% else %}
<h2 class="category">{% trans %}TOURNAMENTNOTREADY{% endtrans %}</h2>
{% endif %}
</div>
{% endblock %}