{% extends "ICupPublicSiteBundle:Masters:edit.html.twig" %}
{% trans_default_domain "club" %}

{% block body %}
<div class="panel panel-info">
    <div class="panel-heading"><b>{{ 'FORM.MYPAGE.TITLE'|trans|upper }}</b></div>
    <div class="panel-body lead">
        {{ currentuser.name|capitalize }} ({{ currentuser.username|upper }})
    </div>
    <div class="panel-body">
        {{ club.name }}
        &nbsp;
        <img src="{{ imagepath }}/flags/{{ countries[club.country].flag }}" 
             alt="{{ club.country|trans({},'lang') }}" 
             title="{{ club.country|trans({},'lang') }}"><br />
        <b>
{% if currentuser.status == 3 %}
            {% trans %}FORM.MYPAGE.PROSPECT{% endtrans %}
{% else %}
    {% if currentuser.role == 2 %}
            {% trans %}FORM.MYPAGE.CLUBADMIN{% endtrans %}
    {% else %}
            {% trans %}FORM.MYPAGE.CLUBUSER{% endtrans %}
    {% endif %}
{% endif %}
        </b>
    </div>
{% if currentuser.status == 3 %}
    <p>Velkommen til klubben.<br/>Klubbens administrator skal godkende din ansøgning om tilknytning.
        Du kan afvente godkendelse eller du kan trække din ansøgning tilbage.</p>
    <p><a href="{{ path('_club_user_refuse') }}">
        Træk ansøgning tilbage...
        </a></p>    
{% else %}
    {% if currentuser.role == 2 %}
        {% if prospectors|length > 0 %}
            <p><a href="{{ path('_user_my_page_users') }}">{% trans %}FORM.MYPAGE.PROSPECTS.AVAILABLE{% endtrans %}</a></p>
        {% endif %}
    {% endif %}
    {% if tournaments|length > 0 %}
    <table class="table table-striped">
        <caption>{% trans %}FORM.MYPAGE.TOURNAMENTS.CAPTION{% endtrans %}</caption>
        <thead>
            <tr>
                <td>{% trans %}FORM.MYPAGE.TOURNAMENTS.TOURNAMENT{% endtrans %}</td>
                <td class="narrow-col"></td>
                <td class="narrow-col">{% trans %}FORM.MYPAGE.TOURNAMENTS.TEAMS{% endtrans %}</td>
            </tr>
        </thead>
        <tbody>
        {% for tmnt in tournaments %}
            {% set tournament = tmnt.tournament %}
            <tr>
                <td>
                    <a href="{{ path('_club_enroll_list', { 'tournament': tournament.id }) }}">{{ tournament.name|upper }}</a>
                </td>
                <td class="narrow-col">
                    <a href="{{ path('_club_enroll_list', { 'tournament': tournament.id }) }}">
                    E
                    </a>    
                </td>
                <td class="narrow-col">
    {% if tmnt.enrolled > 0 %}
                    {{ tmnt.enrolled }}
    {% endif %}                
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
{% endif %}
{% endblock %}