{% extends "ICupPublicSiteBundle:Masters:edit.html.twig" %}
{% trans_default_domain "club" %}

{% block body %}
<h1>{% trans %}FORM.MYPAGE.USERS.TITLE{% endtrans %}</h1>
<p class="subtitle">{{ currentuser.name|capitalize }} ({{ currentuser.username|upper }})</p>
<p><b>
{% if currentuser.role == 2 %}
{% trans %}FORM.MYPAGE.CLUBADMIN{% endtrans %}
{% else %}
{% trans %}FORM.MYPAGE.CLUBUSER{% endtrans %}
{% endif %}
</b>
<br />
{{ club.name }}
&nbsp;
<img src="{{ imagepath }}/flags/{{ flags[club.country] }}" alt="{{ club.country|trans({},'lang') }}" title="{{ club.country|trans({},'lang') }}">
</p>
{% if users|length > 0 %}
<table>
    <caption>{% trans %}FORM.MYPAGE.CAPTION{% endtrans %}</caption>
    <thead>
        <tr>
            <td></td>
            <td class="operand"></td>
            <td class="operand"></td>
            <td class="role"></td>
            <td class="operand"></td>
        </tr>
    </thead>
    <tboby>
    {% for user in users %}
        <tr class="{{ cycle(['even','odd'],loop.index) }}">
            <td class="user">
        {% if currentuser != user %}
                {{ user.name|upper }}
        {% else %}
                <b>{{ user.name|upper }}</b>
        {% endif %}
            </td>
            <td class="operand">
        {% if currentuser != user %}
                <a href="{{ path('_club_user_disconnect', { 'userid': user.id }) }}">
                -
                </a>    
        {% endif %}
            </td>
            <td class="operand">
        {% if currentuser != user %}
                <a href="{{ path('_club_user_chg_role', { 'userid': user.id }) }}">
    {% if user.role == 1 %}
                P
    {% else %}
                D
    {% endif %}
                </a>&nbsp;
        {% endif %}
            </td>
            <td class="role">
{% if user.status == 3 %}
            {% trans %}FORM.MYPAGE.PROSPECT{% endtrans %}
{% else %}
    {% if user.role == 1 %}
                {% trans %}FORM.MYPAGE.CLUBUSER{% endtrans %}
    {% else %}
                {% trans %}FORM.MYPAGE.CLUBADMIN{% endtrans %}
    {% endif %}
{% endif %}
            </td>
            <td class="operand">
        {% if currentuser != user %}
    {% if user.status == 3 %}
                <a href="{{ path('_club_user_connect', { 'clubid': club.id, 'userid': user.id }) }}">
                +
                </a>    
    {% else %}
                {% trans %}FORM.MYPAGE.ATTACHED{% endtrans %}
    {% endif %}
        {% else %}
                {% trans %}FORM.MYPAGE.ATTACHED{% endtrans %}
        {% endif %}
            </td>
        </tr>
    {% endfor %}
    </tboby>
    <tfoot>
        <tr>
            <td colspan="5"></td>
        </tr>
    </tfoot>
</table>
{% endif %}
{% endblock %}